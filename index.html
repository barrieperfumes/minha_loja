<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Barrie Perfumes</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      display: flex;
      flex-direction: column;
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
      color: #333;
    }
    body > .wrapper {
      flex: 1 0 auto;
      display: flex;
      flex-direction: column;
    }
    header {
      background-color: #000;
      color: #fff;
      padding: 15px 20px;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      position: relative;
      z-index: 102;
    }
    .search-box {
      flex: 1;
      display: flex;
      justify-content: center;
      margin: 0 20px;
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      top: 20px;
      max-width: 600px;
      width: 60%;
      z-index: 101;
    }
    .search-box input {
      width: 100%;
      padding: 10px;
      border-radius: 4px;
      border: 1px solid #ccc;
      font-size: 16px;
    }
    .cart {
      cursor: pointer;
      font-size: 28px;
      z-index: 102;
      position: relative;
    }
    .cart-count {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #d4af37;
      color: #000;
      border-radius: 50%;
      padding: 2px 7px;
      font-size: 14px;
      font-weight: bold;
    }
    .banner {
      background: url('https://via.placeholder.com/1200x300?text=Banner+de+Perfumes') center/cover no-repeat;
      height: 300px;
      position: relative;
      flex-shrink: 0;
    }
    .banner .logo {
      position: absolute;
      top: 50%;
      left: 40px;
      transform: translateY(-50%);
      font-size: 64px;
      font-weight: bold;
      color: black;
      text-shadow: 2px 2px 5px rgba(0,0,0,0.7);
      user-select: none;
      z-index: 100;
    }
    .container {
      max-width: 1200px;
      margin: 20px auto;
      padding: 0 20px;
      flex-grow: 1;
    }
    h2 {
      margin-top: 0;
    }
    .produtos {
      display: flex;
      flex-wrap: nowrap;
      gap: 20px;
      justify-content: space-between;
      overflow-x: auto;
    }
    .produto {
      flex: 0 0 23%;
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      box-sizing: border-box;
    }
    .produto img {
      max-width: 100%;
      height: 180px;
      object-fit: cover;
    }
    .produto h3 {
      margin: 10px 0;
    }
    .preco {
      color: #d4af37;
      font-size: 18px;
      margin-bottom: 10px;
    }
    .botao {
      display: inline-block;
      background: hotpink;
      color: #000;
      padding: 10px 15px;
      border-radius: 5px;
      text-decoration: none;
      cursor: pointer;
      margin-top: 10px;
    }
    @media (max-width: 600px) {
      .produtos {
        flex-wrap: wrap;
        flex-direction: column;
      }
      .produto {
        flex: 1 1 auto;
        width: 100%;
      }
    }
    @media (max-width: 600px) {
      .checkout {
        width: 90vw !important;  /* 90% da largura da viewport */
        max-width: none !important; /* remove o max-width fixo */
        max-height: 90vh; /* mant√©m o limite de altura */
        overflow-y: auto; /* permite rolagem vertical */
        padding: 15px;
  }
}

    footer {
      flex-shrink: 0;
      background: #000;
      color: #fff;
      text-align: center;
      padding: 15px;
    }
    .checkout, .cart-view {
      max-width: 400px;
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1000;
      max-height: 90vh;
      overflow-y: auto;
    }
    .cart-view ul {
      list-style: none;
      padding: 0;
      margin: 0 0 15px 0;
      text-align: left;
      max-height: 300px;
      overflow-y: auto;
    }
    .cart-view li {
      border-bottom: 1px solid #ddd;
      padding: 8px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .cart-view button.remove-item {
      background: #ff4444;
      border: none;
      color: white;
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
    }
    input, select {
      width: 100%;
      padding: 8px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 16px;
      box-sizing: border-box;
    }
  </style>
</head>
<body>

<header>
  <div class="cart" onclick="mostrarCarrinho()">
    üõí
    <span class="cart-count" id="cart-count" style="display:none;">0</span>
  </div>
</header>

<div class="wrapper">
  <div class="banner" id="banner-principal">
    <div class="logo">Barrie Perfumes</div>
    <div class="search-box">
      <input type="text" id="campo-pesquisa" placeholder="O que voc√™ est√° procurando?" />
    </div>
  </div>

  <div class="container" id="pagina-principal">
    <h2>Destaques</h2>
    <div class="produtos">
      <div class="produto">
        <img src="https://a-static.mlcdn.com.br/800x560/o-boticario-lily-gardenia-eau-de-parfum-75ml-o-boticario/mtcosmetic/b55363/4d9d87556b95e8c370984a969a53cc9e.jpeg" alt="Perfume Masculino Elegance" />
        <h3>Perfume Masculino Elegance</h3>
        <p class="preco">R$ 199,90</p>
        <a href="#" class="botao" onclick="mostrarCheckout('Perfume Masculino Elegance', 199.90)">Comprar</a>
      </div>

      <div class="produto">
        <img src="https://a-static.mlcdn.com.br/800x560/amor-amor-cacharel-perfume-feminino-eau-de-toilette/epocacosmeticos-integra/7023/0bc0490ddad9fbb3ae1022cb998de0c8.jpeg" alt="Perfume Feminino Lux" />
        <h3>Perfume Feminino Lux</h3>
        <p class="preco">R$ 249,90</p>
        <a href="#" class="botao" onclick="mostrarCheckout('Perfume Feminino Lux', 249.90)">Comprar</a>
      </div>

      <div class="produto">
        <img src="https://a-static.mlcdn.com.br/800x560/queen-of-life-la-rive-perfume-feminino-eau-de-parfum/epocacosmeticos-integra/29221/ee3d65bb6e0dadc49bad1e09d3ee2f10.jpeg" alt="Perfume Unissex Fresh" />
        <h3>Perfume Unissex Fresh</h3>
        <p class="preco">R$ 179,90</p>
        <a href="#" class="botao" onclick="mostrarCheckout('Perfume Unissex Fresh', 179.90)">Comprar</a>
      </div>

      <div class="produto">
        <img src="https://a-static.mlcdn.com.br/800x560/perfume-angel-refillable-eau-de-parfum-feminino-100ml/olistplus/o2esq49nix5r64hx/400df44fd6167df7f201789fd64f6134.jpeg" alt="Perfume Angel" />
        <h3>Perfume Angel</h3>
        <p class="preco">R$ 90,00</p>
        <a href="#" class="botao" onclick="mostrarCheckout('Perfume Angel', 90.00)">Comprar</a>
      </div>
    </div>
  </div>

  <!-- Checkout -->
  <div class="checkout" id="pagina-checkout">
    <h2>Resumo da Compra</h2>
    <p id="resumo-produto"></p>
    <p>Frete: <strong>R$ 20,00</strong></p>
    <p id="total-compra"></p>

    <form action="https://formspree.io/f/mzzgwrgg" method="POST" target="_blank" id="form-pedido">
      <h3>Endere√ßo de Entrega</h3>
      <input type="text" name="nome" placeholder="Nome Completo" required />
      <input type="text" name="endereco" placeholder="Endere√ßo" required />
      <input type="text" name="cep" placeholder="CEP" required />
      <input type="text" name="telefone" placeholder="Telefone" required />

      <h3>Forma de Pagamento</h3>
      <select name="pagamento" id="pagamento" required onchange="mostrarInfoPagamento()">
        <option value="">Selecione</option>
        <option value="Cart√£o de Cr√©dito">Cart√£o de Cr√©dito</option>
        <option value="Pix">Pix</option>
        <option value="Boleto">Boleto</option>
      </select>

      <div id="info-pix" style="display:none; margin-top:10px; padding:10px; background:#e0ffe0; border:1px solid #0a0;">
        <p><strong>Fa√ßa o pagamento via Pix usando a chave CPF:</strong> 134.660.518-19</p>
      </div>

      <input type="hidden" name="produto" id="input-produto" />
      <input type="hidden" name="preco" id="input-preco" />

      <button type="submit" class="botao">Confirmar Pedido</button>
    </form>
    <br />
    <a href="#" class="botao" onclick="voltarParaPrincipal()">Voltar para a Loja</a>
  </div>

  <!-- Carrinho -->
  <div class="cart-view" id="cart-view">
    <h2>Carrinho</h2>
    <ul id="lista-carrinho"></ul>
    <p id="total-carrinho"></p>
    <button class="botao" onclick="finalizarCompraCarrinho()">Finalizar Compra</button>
    <br /><br />
    <a href="#" class="botao" onclick="fecharCarrinho()">Fechar Carrinho</a>
  </div>
</div>

<footer>
  <p>&copy; 2025 Barrie Perfumes - Todos os direitos reservados</p>
</footer>

<script>
  const carrinho = [];

  // Atualiza o contador no √≠cone do carrinho
  function atualizarContadorCarrinho() {
    const contador = document.getElementById('cart-count');
    if (carrinho.length > 0) {
      contador.style.display = 'inline';
      contador.innerText = carrinho.length;
    } else {
      contador.style.display = 'none';
    }
  }

  // Mostrar checkout para um produto (comprar direto)
  function mostrarCheckout(nome, preco) {
    document.getElementById('pagina-principal').style.display = 'none';
    document.getElementById('pagina-checkout').style.display = 'block';
    document.getElementById('banner-principal').style.display = 'none';
    document.getElementById('cart-view').style.display = 'none';

    document.getElementById('resumo-produto').innerText = nome + ' - R$ ' + preco.toFixed(2);
    document.getElementById('total-compra').innerHTML = 'Total: <strong>R$ ' + (preco + 20).toFixed(2) + '</strong>';

    document.getElementById('input-produto').value = nome;
    document.getElementById('input-preco').value = preco.toFixed(2);
  }

  // Voltar para p√°gina principal
  function voltarParaPrincipal() {
    document.getElementById('pagina-checkout').style.display = 'none';
    document.getElementById('pagina-principal').style.display = 'block';
    document.getElementById('banner-principal').style.display = 'block';
    document.getElementById('cart-view').style.display = 'none';
  }

  // Adicionar produto ao carrinho
  function adicionarAoCarrinho(nome, preco) {
    // Verifica se j√° existe no carrinho, incrementa quantidade se sim
    const itemExistente = carrinho.find(item => item.nome === nome);
    if (itemExistente) {
      itemExistente.quantidade++;
    } else {
      carrinho.push({ nome, preco, quantidade: 1 });
    }
    alert(nome + " adicionado ao carrinho!");
    atualizarContadorCarrinho();
  }

  // Mostrar o carrinho
  function mostrarCarrinho() {
    if (carrinho.length === 0) {
      alert("Seu carrinho est√° vazio!");
      return;
    }
    document.getElementById('pagina-principal').style.display = 'none';
    document.getElementById('pagina-checkout').style.display = 'none';
    document.getElementById('banner-principal').style.display = 'none';
    document.getElementById('cart-view').style.display = 'block';

    atualizarListaCarrinho();
  }

  // Atualizar a lista de produtos no carrinho
  function atualizarListaCarrinho() {
    const lista = document.getElementById('lista-carrinho');
    lista.innerHTML = '';
    let total = 0;
    carrinho.forEach((item, index) => {
      total += item.preco * item.quantidade;
      const li = document.createElement('li');
      li.innerHTML = `
        ${item.nome} - R$ ${item.preco.toFixed(2)} x ${item.quantidade}
        <button class="remove-item" onclick="removerDoCarrinho(${index})">Remover</button>
      `;
      lista.appendChild(li);
    });
    document.getElementById('total-carrinho').innerHTML = 'Total do carrinho: <strong>R$ ' + (total + 20).toFixed(2) + '</strong> (inclui frete)';
  }

  // Remover item do carrinho
  function removerDoCarrinho(index) {
    carrinho.splice(index, 1);
    atualizarListaCarrinho();
    atualizarContadorCarrinho();
    if (carrinho.length === 0) {
      fecharCarrinho();
    }
  }

  // Fechar a visualiza√ß√£o do carrinho
  function fecharCarrinho() {
    document.getElementById('cart-view').style.display = 'none';
    document.getElementById('pagina-principal').style.display = 'block';
    document.getElementById('banner-principal').style.display = 'block';
  }

  // Finalizar compra a partir do carrinho (leva para checkout com resumo)
  function finalizarCompraCarrinho() {
    if (carrinho.length === 0) {
      alert("Seu carrinho est√° vazio!");
      return;
    }

    // Monta resumo simplificado (concatena produtos e pre√ßos)
    const nomesProdutos = carrinho.map(item => `${item.nome} (x${item.quantidade})`).join(", ");
    const totalPreco = carrinho.reduce((acc, item) => acc + item.preco * item.quantidade, 0);

    document.getElementById('resumo-produto').innerText = nomesProdutos;
    document.getElementById('total-compra').innerHTML = 'Total: <strong>R$ ' + (totalPreco + 20).toFixed(2) + '</strong>';

    // Define os valores escondidos para envio (produto e preco)
    document.getElementById('input-produto').value = nomesProdutos;
    document.getElementById('input-preco').value = totalPreco.toFixed(2);

    // Exibe o checkout e esconde outras telas
    document.getElementById('cart-view').style.display = 'none';
    document.getElementById('pagina-checkout').style.display = 'block';
    document.getElementById('pagina-principal').style.display = 'none';
    document.getElementById('banner-principal').style.display = 'none';
  }

  // Busca corrigida mantendo o layout:
  document.getElementById('campo-pesquisa').addEventListener('input', function() {
    const termo = this.value.toLowerCase();
    const produtos = document.querySelectorAll('.produto');

    produtos.forEach(produto => {
      const nome = produto.querySelector('h3').innerText.toLowerCase();
      if (nome.includes(termo)) {
        produto.style.display = '';
      } else {
        produto.style.display = 'none';
      }
    });
  });

  function mostrarInfoPagamento() {
    const pagamento = document.getElementById('pagamento').value;
    const infoPix = document.getElementById('info-pix');
    if (pagamento === 'Pix') {
      infoPix.style.display = 'block';
    } else {
      infoPix.style.display = 'none';
    }
  }
</script>

<script>
  // Para cada bot√£o "Comprar", adiciona tamb√©m um bot√£o "Adicionar ao Carrinho"
  document.querySelectorAll('.produto').forEach(produtoDiv => {
    const nome = produtoDiv.querySelector('h3').innerText;
    const precoText = produtoDiv.querySelector('.preco').innerText;
    const preco = parseFloat(precoText.replace('R$', '').replace(',', '.'));

    // Cria o bot√£o "Adicionar ao Carrinho"
    const btnAdicionar = document.createElement('a');
    btnAdicionar.href = '#';
    btnAdicionar.className = 'botao';
    btnAdicionar.style.marginLeft = '10px';
    btnAdicionar.textContent = 'Adicionar ao Carrinho';
    btnAdicionar.onclick = function(e) {
      e.preventDefault();
      adicionarAoCarrinho(nome, preco);
    };

    // Insere ap√≥s o bot√£o "Comprar"
    const botaoComprar = produtoDiv.querySelector('.botao');
    botaoComprar.insertAdjacentElement('afterend', btnAdicionar);
  });
</script>

</body>
</html>
